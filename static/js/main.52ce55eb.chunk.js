(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,n){e.exports=n.p+"static/media/logo.688a3e40.png"},30:function(e,t,n){e.exports=n.p+"static/media/icon-cart.3c5673b4.png"},32:function(e,t,n){e.exports=n(51)},37:function(e,t,n){},39:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(25),o=n.n(c),i=(n(37),n(5)),u=n(6),s=n(8),l=n(7),p=n(9),m=(n(39),n(26)),d=n(27),f=n.n(d),h=n(11),v=n.n(h),g=n(12),E=n(28),b=n.n(E),y="https://rest-api-broot.glitch.me/api/mariia";function O(e){if(e.ok)return e;throw new Error("server error")}function j(e){return e.json()}function C(e,t){return fetch(e,t).then(O).then(j)}function N(e){return fetch("".concat(y,"/products/").concat(e)).then(O).then(j)}var k,P=(k=function(e){return C("".concat(y,"/products?").concat(b.a.stringify(e)))},{state:{list:[]},reducers:{setList:function(e,t){e.list=t},filterPriceFrom:function(e,t){return e.list=e.list.filter(function(e){return e.price>=Number(t)})},filterPriceTo:function(e,t){var n=e.list=e.list.filter(function(e){return e.price<=Number(t)});console.log(n)}},effects:function(e){return{loadAll:function(){var e=Object(g.a)(v.a.mark(function e(t,n){var r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(t);case 2:r=e.sent,this.setList(r);case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),loadOne:function(){var e=Object(g.a)(v.a.mark(function e(t,n){var r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(t);case 2:r=e.sent,this.setList([r]);case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}}});var w,x=(w=function(){return C("".concat(y,"/categories"))},{state:{list:[]},reducers:{setList:function(e,t){e.list=t}},effects:function(e){return{loadCategories:function(){var e=Object(g.a)(v.a.mark(function e(t,n){var r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:r=e.sent,this.setList(r);case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}}}),I={state:{items:[]},reducers:{addProduct:function(e,t){var n=e.items.find(function(e){return e.product.id===t.id});n?n.quantity+=1:e.items.push({product:t,quantity:1})},removeProduct:function(e,t){e.items=e.items.filter(function(e){return e.product.id!==t})},setQuantity:function(e,t,n){0===n?e.items=e.items.filter(function(e){return e.product.id!==t}):e.items.find(function(e){return e.product.id===t}).quantity=Number(n)}}},Q="productsInCart";var D={products:P,categories:x,productsInCart:I},q=f()(),A=Object(m.init)({models:D,plugins:[q],redux:{initialState:{productsInCart:function(){var e=localStorage.getItem(Q);return JSON.parse(e)||I.state}()},middlewares:[function(e){return function(t){return function(n){console.log("dispatching",n),n.x=1;var r=t(n);return console.log("next state",e.getState()),r}}}]}});A.subscribe(function(){!function(e){var t=e.getState().productsInCart;localStorage.setItem(Q,JSON.stringify(t))}(A)}),window.store=A;var F=A,S=n(4),T=n(53),B=n(55),L=n(54),J=n(52);var M=function(e){var t=e.product;return a.a.createElement("article",null,a.a.createElement("img",{src:t.image,alt:t.name}),a.a.createElement("p",{className:"title"},t.name),a.a.createElement("p",null,"\u20ac".concat(t.price.toFixed(2))),a.a.createElement(J.a,{to:"/products/".concat(t.id)},a.a.createElement("button",null,"BUY NOW")))},W=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.category;return a.a.createElement(J.a,{to:"/categories/".concat(e.id)},e.name)}}]),t}(r.Component),R=n(30),K=n.n(R);function U(e){var t=e.items.reduce(function(e,t){var n=t.product,r=t.quantity;return e+n.price*r},0);return Number(t).toFixed(2)}var Y=Object(S.b)(function(e){return{productsQuantity:(t=e.productsInCart,t.items.reduce(function(e,t){return e+t.quantity},0)),totalPrice:U(e.productsInCart,e.products.list)};var t})(function(e){var t=e.productsQuantity;return e.totalPrice,a.a.createElement("div",{className:"cart-button"},a.a.createElement(J.a,{to:"/cart"}," ",a.a.createElement("img",{alt:"",src:K.a}),a.a.createElement("span",null,"BASKET (",Number(t),")")))}),$=n(14),z=n.n($),G=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.loadCategories()}},{key:"render",value:function(){return a.a.createElement("header",null,a.a.createElement("div",{className:"header-container"},a.a.createElement("a",{className:"logo",href:"/"},a.a.createElement("img",{alt:"",src:z.a})),a.a.createElement("nav",{className:"categories-menu"},this.props.categories.map(function(e){return a.a.createElement(W,{key:e.id,category:e})})),a.a.createElement(Y,null)),a.a.createElement("div",{className:"title-text"},a.a.createElement("p",null,this.props.title)))}}]),t}(r.Component),H=Object(S.b)(function(e){return{categories:e.categories.list}},function(e){return{loadCategories:e.categories.loadCategories}})(G);function V(e,t){return t.find(function(t){return t.id===e.categoryId})}function X(e,t){var n=e.find(function(e){return e.id===t});return n?n.name:""}var Z=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.loadData(this.props)}},{key:"componentWillReceiveProps",value:function(e){e.match.url!==this.props.match.url&&this.loadData(e)}},{key:"loadData",value:function(e){if("/categories/:id"===e.match.path)var t={filter:{categoryId:e.match.params.id}};e.loadAll(t),e.loadCategories()}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"products-page"},a.a.createElement(H,{title:X(this.props.categories,this.props.match.params.id)}),a.a.createElement("main",null,a.a.createElement("div",{className:"filter"},a.a.createElement("span",null,"Price:"),a.a.createElement("select",{onChange:function(t){return e.props.filterPriceFrom(t.target.value)}},a.a.createElement("option",null,"0"),a.a.createElement("option",null,"100"),a.a.createElement("option",null,"200"),a.a.createElement("option",null,"300")),a.a.createElement("select",{onChange:function(t){return e.props.filterPriceTo(t.target.value)}},a.a.createElement("option",null,"0"),a.a.createElement("option",null,"100"),a.a.createElement("option",null,"200"),a.a.createElement("option",null,"300"))),a.a.createElement("div",{className:"product-items"},this.props.products.map(function(t){return a.a.createElement(M,{key:t.id,id:t.id,product:t,removeProduct:e.props.removeProduct,setQuantity:e.props.setQuantity,category:V(t,e.props.categories)})}))))}}]),t}(a.a.Component),_=Object(S.b)(function(e){return{products:e.products.list,categories:e.categories.list}},function(e){var t=e.products,n=e.categories;e.productsInCart;return{loadAll:t.loadAll,loadCategories:n.loadCategories,filterPriceFrom:t.filterPriceFrom,filterPriceTo:t.filterPriceTo}})(Z);var ee=Object(S.b)(null,function(e,t){return{addProduct:function(){return e.productsInCart.addProduct(t.product)}}})(function(e){var t=e.product,n=e.category,r=e.addProduct;return a.a.createElement("article",{className:"product"},a.a.createElement("div",{className:"product-img"},a.a.createElement("img",{src:t.image,alt:t.name})),a.a.createElement("div",{className:"product-discription"},a.a.createElement("h1",null,t.name),a.a.createElement("h2",null,"Category: ",n?n.name:""),a.a.createElement("p",null,t.description),a.a.createElement("p",{className:"price"},"\u20ac".concat(t.price.toFixed(2))),a.a.createElement("button",{onClick:r},"ADD TO CART")))}),te=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.loadOne(this.props.match.params.id)}},{key:"render",value:function(){var e=this.props.product;return this.props.product?a.a.createElement("div",{className:"product-page"},a.a.createElement(H,{title:e.name}),a.a.createElement("main",null,a.a.createElement(ee,{category:V(e,this.props.categories),product:e}))):"loading"}}]),t}(a.a.Component),ne=Object(S.b)(function(e,t){return{categories:e.categories.list,product:e.products.list.find(function(e){return e.id===t.match.params.id})}},function(e){return{loadOne:e.products.loadOne}})(te);function re(e){var t=e.product,n=e.quantity,r=e.setQuantity,c=e.removeProduct;return a.a.createElement("article",null,a.a.createElement("img",{src:t.image,alt:t.name}),a.a.createElement("div",{className:"details"},a.a.createElement("p",{className:"title"},t.name),a.a.createElement("input",{type:"number",value:n,onChange:function(e){return r(t.id,e.target.value)}}),a.a.createElement("p",null,"1x ","\u20ac".concat(t.price.toFixed(2))),a.a.createElement("button",{onClick:function(){return c(t.id)}},"remove")))}var ae=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.cartItems,r=t.totalPrice;return a.a.createElement("div",{className:"cart-page"},a.a.createElement(H,{title:"Basket"}),a.a.createElement("main",null,n.map(function(t){return a.a.createElement(re,{key:t.product.id,product:t.product,quantity:t.quantity,setQuantity:e.props.setQuantity,removeProduct:e.props.removeProduct})}),a.a.createElement("p",{className:"total"},"Total: \u20ac",r)))}}]),t}(a.a.Component),ce=Object(S.b)(function(e){return{cartItems:e.productsInCart.items,totalPrice:U(e.productsInCart)}},function(e){var t=e.productsInCart;return{removeProduct:t.removeProduct,setQuantity:t.setQuantity}})(ae),oe=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.loadCategories()}},{key:"render",value:function(){return a.a.createElement("header",null,a.a.createElement("div",{className:"header-container"},a.a.createElement("a",{className:"logo",href:"/"},a.a.createElement("img",{alt:"",src:z.a})),a.a.createElement("nav",{className:"categories-menu"},this.props.categories.map(function(e){return a.a.createElement(W,{key:e.id,category:e})})),a.a.createElement(Y,null)),a.a.createElement("div",{className:"title-text"},a.a.createElement("p",null,"Buckle your seat belts it's going to be a bumpy ride")))}}]),t}(a.a.Component),ie=Object(S.b)(function(e){return{categories:e.categories.list}},function(e){return{loadCategories:e.categories.loadCategories}})(oe),ue=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"App"},a.a.createElement(S.a,{store:F},a.a.createElement(T.a,null,a.a.createElement(B.a,null,a.a.createElement(L.a,{path:"/cart",component:ce}),a.a.createElement(L.a,{path:"/products/:id",component:ne}),a.a.createElement(L.a,{path:"/products",component:_}),a.a.createElement(L.a,{path:"/categories/:id",component:_}),a.a.createElement(L.a,{path:"/",component:ie})))))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(ue,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[32,2,1]]]);
//# sourceMappingURL=main.52ce55eb.chunk.js.map