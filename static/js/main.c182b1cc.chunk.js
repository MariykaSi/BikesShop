(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{29:function(t,e,n){t.exports=n.p+"static/media/icon-cart.3c5673b4.png"},30:function(t,e,n){t.exports=n.p+"static/media/logo.688a3e40.png"},32:function(t,e,n){t.exports=n(51)},37:function(t,e,n){},39:function(t,e,n){},51:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),c=n(24),i=n.n(c),o=(n(37),n(4)),u=n(5),s=n(8),l=n(6),m=n(9),p=(n(39),n(25)),d=n(26),f=n.n(d),h=n(11),v=n.n(h),g=n(12),E=n(27),b=n.n(E),y="https://rest-api-broot.glitch.me/api/mariia";function O(t){if(t.ok)return t;throw new Error("server error")}function j(t){return t.json()}function C(t,e){return fetch(t,e).then(O).then(j)}function k(t){return fetch("".concat(y,"/products/").concat(t)).then(O).then(j)}var N,P=(N=function(t){return C("".concat(y,"/products?").concat(b.a.stringify(t)))},{state:{list:[]},reducers:{setList:function(t,e){t.list=e}},effects:function(t){return{loadAll:function(){var t=Object(g.a)(v.a.mark(function t(e,n){var r;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N(e);case 2:r=t.sent,this.setList(r);case 4:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),loadOne:function(){var t=Object(g.a)(v.a.mark(function t(e,n){var r;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k(e);case 2:r=t.sent,this.setList([r]);case 4:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()}}});var w,x=(w=function(){return C("".concat(y,"/categories"))},{state:{list:[]},reducers:{setList:function(t,e){t.list=e}},effects:function(t){return{loadCategories:function(){var t=Object(g.a)(v.a.mark(function t(e,n){var r;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w();case 2:r=t.sent,this.setList(r);case 4:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()}}}),I={state:{items:[]},reducers:{addProduct:function(t,e){var n=t.items.find(function(t){return t.product.id===e.id});n?n.quantity+=1:t.items.push({product:e,quantity:1})},removeProduct:function(t,e){t.items=t.items.filter(function(t){return t.product.id!==e})},setQuantity:function(t,e,n){0===n?t.items=t.items.filter(function(t){return t.product.id!==e}):t.items.find(function(t){return t.product.id===e}).quantity=Number(n)}}},F="productsInCart";var T={products:P,categories:x,productsInCart:I,filterValue:{state:{priceFrom:0,priceTo:1e3},reducers:{filterPriceFrom:function(t,e){t.priceFrom=Number(e)},filterPriceTo:function(t,e){t.priceTo=Number(e)}}}},Q=f()(),q=Object(p.init)({models:T,plugins:[Q],redux:{initialState:{productsInCart:function(){var t=localStorage.getItem(F);return JSON.parse(t)||I.state}()},middlewares:[function(t){return function(e){return function(n){console.log("dispatching",n),n.x=1;var r=e(n);return console.log("next state",t.getState()),r}}}]}});q.subscribe(function(){!function(t){var e=t.getState().productsInCart;localStorage.setItem(F,JSON.stringify(e))}(q)}),window.store=q;var A=q,D=n(7),S=n(53),B=n(55),L=n(54),V=n(52);var J=function(t){var e=t.product;return a.a.createElement("article",null,a.a.createElement("img",{src:e.image,alt:e.name}),a.a.createElement("p",{className:"title"},e.name),a.a.createElement("p",null,"\u20ac".concat(e.price.toFixed(2))),a.a.createElement(V.a,{to:"/products/".concat(e.id)},a.a.createElement("button",null,"BUY NOW")))},W=function(t){function e(){return Object(o.a)(this,e),Object(s.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this.props.category;return a.a.createElement(V.a,{to:"/categories/".concat(t.id)},t.name)}}]),e}(r.Component),M=n(29),R=n.n(M);function K(t){var e=t.items.reduce(function(t,e){var n=e.product,r=e.quantity;return t+n.price*r},0);return Number(e).toFixed(2)}var U=Object(D.b)(function(t){return{productsQuantity:(e=t.productsInCart,e.items.reduce(function(t,e){return t+e.quantity},0)),totalPrice:K(t.productsInCart,t.products.list)};var e})(function(t){var e=t.productsQuantity;return t.totalPrice,a.a.createElement("div",{className:"cart-button"},a.a.createElement(V.a,{to:"/cart"}," ",a.a.createElement("img",{alt:"",src:R.a}),a.a.createElement("span",null,"BASKET (",Number(e),")")))}),Y=n(30),$=n.n(Y),z=function(t){function e(){return Object(o.a)(this,e),Object(s.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){this.props.loadCategories()}},{key:"render",value:function(){return a.a.createElement("header",null,a.a.createElement("div",{className:"header-container"},a.a.createElement("a",{className:"logo",href:"/"},a.a.createElement("img",{alt:"",src:$.a})),a.a.createElement("nav",{className:"categories-menu"},this.props.categories.map(function(t){return a.a.createElement(W,{key:t.id,category:t})})),a.a.createElement(U,null)),a.a.createElement("div",{className:"title-text"},a.a.createElement("p",null,this.props.title)))}}]),e}(r.Component),G=Object(D.b)(function(t){return{categories:t.categories.list}},function(t){return{loadCategories:t.categories.loadCategories}})(z);function H(t,e){return e.find(function(e){return e.id===t.categoryId})}function X(t,e){var n=t.find(function(t){return t.id===e});return n?n.name:""}var Z=[0,100,200,300,400,500,600,1e3],_=function(t){function e(){return Object(o.a)(this,e),Object(s.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){this.loadData(this.props)}},{key:"componentWillReceiveProps",value:function(t){t.match.url!==this.props.match.url&&this.loadData(t)}},{key:"loadData",value:function(t){if("/categories/:id"===t.match.path)var e={filter:{categoryId:t.match.params.id}};t.loadAll(e),t.loadCategories()}},{key:"render",value:function(){var t=this.props,e=t.categories,n=t.filterPriceFrom,r=t.filterPriceTo,c=t.filterValue,i=t.removeProduct,o=t.setQuantity,u=t.match;return a.a.createElement("div",{className:"products-page"},a.a.createElement(G,{title:X(e,u.params.id)}),a.a.createElement("main",null,a.a.createElement("div",{className:"filter"},a.a.createElement("span",null,"Price:"),a.a.createElement("select",{onChange:function(t){return n(t.target.value)}},Z.map(function(t,e){return a.a.createElement("option",{key:e},t)})),a.a.createElement("select",{onChange:function(t){return r(t.target.value)}},Z.map(function(t,e){return a.a.createElement("option",{key:e},t)}))),a.a.createElement("div",{className:"product-items"},this.props.products.map(function(t){return t.price>=c.priceFrom&&t.price<=c.priceTo?a.a.createElement(J,{key:t.id,id:t.id,product:t,removeProduct:i,setQuantity:o,category:H(t,e)}):a.a.createElement("div",{key:t.id})}))))}}]),e}(a.a.Component),tt=Object(D.b)(function(t){return{products:t.products.list,categories:t.categories.list,filterValue:t.filterValue}},function(t){var e=t.products,n=t.categories,r=t.filterValue;return{loadAll:e.loadAll,loadCategories:n.loadCategories,filterPriceFrom:r.filterPriceFrom,filterPriceTo:r.filterPriceTo}})(_);var et=Object(D.b)(null,function(t,e){return{addProduct:function(){return t.productsInCart.addProduct(e.product)}}})(function(t){var e=t.product,n=t.category,r=t.addProduct;return a.a.createElement("article",{className:"product"},a.a.createElement("div",{className:"product-img"},a.a.createElement("img",{src:e.image,alt:e.name})),a.a.createElement("div",{className:"product-discription"},a.a.createElement("h1",null,e.name),a.a.createElement("h2",null,"Category: ",n?n.name:""),a.a.createElement("p",null,e.description),a.a.createElement("p",{className:"price"},"\u20ac".concat(e.price.toFixed(2))),a.a.createElement("button",{onClick:r},"ADD TO CART")))}),nt=function(t){function e(){return Object(o.a)(this,e),Object(s.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){this.props.loadOne(this.props.match.params.id)}},{key:"render",value:function(){var t=this.props.product;return this.props.product?a.a.createElement("div",{className:"product-page"},a.a.createElement(G,{title:t.name}),a.a.createElement("main",null,a.a.createElement(et,{category:H(t,this.props.categories),product:t}))):"loading"}}]),e}(a.a.Component),rt=Object(D.b)(function(t,e){return{categories:t.categories.list,product:t.products.list.find(function(t){return t.id===e.match.params.id})}},function(t){return{loadOne:t.products.loadOne}})(nt);function at(t){var e=t.product,n=t.quantity,r=t.setQuantity,c=t.removeProduct;return a.a.createElement("article",null,a.a.createElement("img",{src:e.image,alt:e.name}),a.a.createElement("div",{className:"details"},a.a.createElement("p",{className:"title"},e.name),a.a.createElement("input",{type:"number",value:n,onChange:function(t){return r(e.id,t.target.value)}}),a.a.createElement("p",null,"1x ","\u20ac".concat(e.price.toFixed(2))),a.a.createElement("button",{onClick:function(){return c(e.id)}},"remove")))}var ct=function(t){function e(){return Object(o.a)(this,e),Object(s.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this,e=this.props,n=e.cartItems,r=e.totalPrice;return a.a.createElement("div",{className:"cart-page"},a.a.createElement(G,{title:"Basket"}),a.a.createElement("main",null,n.map(function(e){return a.a.createElement(at,{key:e.product.id,product:e.product,quantity:e.quantity,setQuantity:t.props.setQuantity,removeProduct:t.props.removeProduct})}),a.a.createElement("p",{className:"total"},"Total: \u20ac",r)))}}]),e}(a.a.Component),it=Object(D.b)(function(t){return{cartItems:t.productsInCart.items,totalPrice:K(t.productsInCart)}},function(t){var e=t.productsInCart;return{removeProduct:e.removeProduct,setQuantity:e.setQuantity}})(ct),ot=function(t){function e(){return Object(o.a)(this,e),Object(s.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){return a.a.createElement(G,{title:"Buckle your seat belts it's going to be a bumpy ride"})}}]),e}(a.a.Component),ut=function(t){function e(){return Object(o.a)(this,e),Object(s.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){return a.a.createElement("div",{className:"App"},a.a.createElement(D.a,{store:A},a.a.createElement(S.a,null,a.a.createElement(B.a,null,a.a.createElement(L.a,{path:"/cart",component:it}),a.a.createElement(L.a,{path:"/products/:id",component:rt}),a.a.createElement(L.a,{path:"/products",component:tt}),a.a.createElement(L.a,{path:"/categories/:id",component:tt}),a.a.createElement(L.a,{path:"/categories",component:ot}),a.a.createElement(L.a,{path:"/",component:ot})))))}}]),e}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(ut,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[32,2,1]]]);
//# sourceMappingURL=main.c182b1cc.chunk.js.map